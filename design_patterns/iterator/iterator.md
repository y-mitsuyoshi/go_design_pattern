# イテレーターパターンとは？
イテレーターパターンは、プログラムでデータのリストや集合などの要素を一つずつ順番に取り出すためのデザインパターンです。これは、コードをより効率的に管理し、データを扱いやすくする方法です。

## なぜイテレーターパターンが必要なのか？
データの集合を操作する: リスト、配列、セットなど、複数のデータが集まっている場合、それらを1つずつ順番に処理する必要があります。イテレーターパターンは、このようなデータを操作する方法を提供します。

データの隠蔽: イテレーターパターンは、データの内部構造を隠蔽し、コードの外部からアクセスを制限します。これにより、データの変更がコード全体に影響を与えにくくなります。

## イテレーターパターンの要素
イテレーター（Iterator）: データの反復処理を行うオブジェクトです。要素を一つずつ提供し、反復を制御します。

コレクション（Collection）: 複数の要素を持つデータ構造を表します。通常、コレクションはイテレーターを作成する責任があります。

## イテレーターパターンの利点
柔軟性: 新しいコレクションを追加する際に、イテレーターがあれば簡単に反復処理ができます。

再利用性: 同じイテレーターパターンをさまざまな場所で使いまわすことができます。

データのカプセル化: コードの外部からデータへのアクセスを制御し、データを保護します。

## Rubyではイテレーターってどうなっているの?
実は標準メソッドで実装されています。

https://github.com/ruby/ruby/blob/01c765677566f227854d737efcf2c06d139ddbac/array.c#L2525-L2535

```ruby
VALUE
rb_ary_each(VALUE ary)
{
    long i;
    ary_verify(ary);
    RETURN_SIZED_ENUMERATOR(ary, 0, 0, ary_enum_length);
    for (i=0; i<RARRAY_LEN(ary); i++) {
        rb_yield(RARRAY_AREF(ary, i));
    }
    return ary;
}

```